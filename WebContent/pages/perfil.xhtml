<ui:composition template="base.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="headContent">
		<h:outputStylesheet library="css" name="perfil.css" />
	</ui:define>


	<ui:define name="content">
	
	<c:set var="user" value="#{userBean.getPerfilUser()}" />
	
	<c:if test="#{not empty user}">

	    <div class="container">
	        <section>
	            <div id="landing-section">
		            
		            <div class="row">
					    <div class="col">
						     <c:if test="#{not empty user.imagePath}">
					            <div class="user-image" style="margin-left: 50px;">
					        		<h:graphicImage value="/resources/files/users/#{user.imagePath}" />
				        		</div>
				           	</c:if>
				           	 <c:if test="#{empty user.imagePath}">
			           			<i class="fa fa-user-circle-o" style="color: white; font-size: 150px;margin-left: 50px;margin-top: 30px"/>
			       		   </c:if>
					    </div>
					    <div class="col">
			                <h1 class="display-4" id="username">#{user.firstName} #{user.lastName}</h1>
			                
			                <c:if test="#{user.isMember() and !user.isAdmin()}">
			                	<p class="lead text-right" style="padding-right: 50px;">ACM Member</p>
			                </c:if>
			           		<c:if test="#{user.isAdmin()}">
			           			<p class="lead text-right" style="padding-right: 50px;">ACM Admin</p>
			           		</c:if>	
					    </div>
					</div>
	            
	            </div>
	           
	        </section>
	        <section style="margin-top: 60px;">
	            <h1 class="display-4 text-center">Events</h1>
	            <div role="tablist" id="accordion-1">
	            
	            
	            <c:forEach items="#{user.getEvents()}" var="event" varStatus="loopStatus">
	            
	            	<div class="card">
	            		<div class="card-header" role="tab">
	                        <h5 class="mb-0">
	                        	<a data-toggle="collapse" aria-expanded="false" aria-controls="accordion-1 .item-1" href="#accordion-1 .item-#{loopStatus.index + 1}">#{event.title}</a>
                       		</h5>
	                    </div>
	                    <div class="collapse item-#{loopStatus.index + 1}" role="tabpanel" data-parent="#accordion-1">
	                        <div class="card-body">
	                        
                     			 <div class="row">
                  			 		<div class="col-xl-4">
                                        <div class="image-conatiner">
                                        	<h:graphicImage value="/resources/files/#{event.images.get(0)}"/>
                                       	</div>
                                    </div>
                                    <div class="col-xl-8">	
                                        <div class="col list-col">
	                                      <ul class="list-unstyled" style="font-size: 18px;color: rgba(33,37,41,0.83);line-height: 30px;">
	                                      
			                                      <c:forEach items="#{event.infos}" var="info" varStatus="loopStatus1">
		                                                <li class="list-inline-item"><i class="fa fa-map-marker"></i> #{info.getPlace()}</li>
		                                                <li class="list-inline-item"><i class="fa fa-calendar"></i> #{info.getStartDateDay()} #{info.getStartDateMonth()}</li>
		                                                <li class="list-inline-item"><i class="fa fa-clock-o"></i>#{info.getStartDateHours()} - #{info.getEndDateHours()}</li>
                                                </c:forEach>
                                                
                                            </ul>
	                                         <h:form>
					                            <h:button class="btn btn-primary rect-border" a:data-bs-hover-animate="pulse" value="See event" outcome="event">
					                      	      	<f:param name="id" value="#{event.getId()}" />
					                            </h:button>
				                             </h:form>
                                        </div>
                                    </div>
                      			 </div>
                      			 
                           </div>
	                    </div>
	            	</div>
	            
	            </c:forEach>
	                
	                
	            </div>
	        </section>
	    </div>
    
    </c:if>
    
    <c:if test="#{empty user}">
    	
    		<h1 class="display-4" style="margin:20px; text-align: center">
    			<i class="fa fa-close"></i> User not found 
   			</h1>
    		
   </c:if> 
    
	</ui:define>
</ui:composition>