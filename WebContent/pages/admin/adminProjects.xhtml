<ui:composition template="adminBase.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="content">
	
		<c:set var="project" value="#{adminProjectBean.project}"/>
	
		<div class="d-sm-flex justify-content-between align-items-center mb-4">
                <h3 class="text-dark mb-0">Projects</h3>
                </div>
                <div class="row">
                    <div class="col-md-6 col-xl-3 mb-4">
                        <div class="card shadow border-left-primary py-2">
                            <div class="card-body">
                                <div class="row align-items-center no-gutters">
                                    <div class="col mr-2">
                                        <div class="text-uppercase text-primary font-weight-bold text-xs mb-1"><span>views  (monthly)</span></div>
                                        <div class="text-dark font-weight-bold h5 mb-0"><span>356</span></div>
                                    </div>
                                    <div class="col-auto"><i class="far fa-eye fa-2x text-gray-300"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-xl-3 mb-4">
                        <div class="card shadow border-left-success py-2">
                            <div class="card-body">
                                <div class="row align-items-center no-gutters">
                                    <div class="col mr-2">
                                        <div class="text-uppercase text-success font-weight-bold text-xs mb-1"><span>Projects on going</span></div>
                                        <div class="text-dark font-weight-bold h5 mb-0"><span>5</span></div>
                                    </div>
                                    <div class="col-auto"><i class="fas fa-dollar-sign fa-2x text-gray-300"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-xl-3 mb-4">
                        <div class="card shadow border-left-info py-2">
                            <div class="card-body">
                                <div class="row align-items-center no-gutters">
                                    <div class="col mr-2">
                                        <div class="text-uppercase text-info font-weight-bold text-xs mb-1"><span>Tasks</span></div>
                                        <div class="row no-gutters align-items-center">
                                            <div class="col-auto">
                                                <div class="text-dark font-weight-bold h5 mb-0 mr-3"><span>50%</span></div>
                                            </div>
                                            <div class="col">
                                                <div class="progress progress-sm">
                                                    <div class="progress-bar bg-info" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 50%;"><span class="sr-only">50%</span></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-auto"><i class="fas fa-clipboard-list fa-2x text-gray-300"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-xl-3 mb-4">
                        <div class="card shadow border-left-warning py-2">
                            <div class="card-body">
                                <div class="row align-items-center no-gutters">
                                    <div class="col mr-2">
                                        <div class="text-uppercase text-warning font-weight-bold text-xs mb-1"><span>Pending projects </span></div>
                                        <div class="text-dark font-weight-bold h5 mb-0"><span>18</span></div>
                                    </div>
                                    <div class="col-auto"><i class="fas fa-comments fa-2x text-gray-300"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="margin-bottom: 30px;">
                    <div class="card shadow py-2" style="margin: 0 auto;">
                        <div class="card-body">
                        	 <div class="row">
							    <div class="col-6">
							        <canvas id="barChartCreatedProjects"/>
							    </div>
							    <div class="col-6">
							        <canvas id="lineChartViews"/>
							    </div>
							</div>
                        </div>
                    </div>
                </div>
                <div style="margin-bottom: 30px;">
                    <div class="card shadow py-2">
                        <div class="card-body ">
                            <h1 class="display-3 text-center">Projects</h1>
	                            <h:dataTable class="table table-hover text-center text-center" value="#{adminProjectsBean.projects}" var="p">
	                            	<h:column>
	                            		<f:facet name="header">#Id</f:facet>
	                            		#{p.id}
	                            	</h:column>
	                            	<h:column>
	                            		<f:facet name="header">Title</f:facet>
	                            		#{p.title}
	                            	</h:column>
	                            	<h:column>
	                            		<f:facet name="header">Manager</f:facet>
	                            		#{p.manager.username}
	                            	</h:column>
	                            	<h:column>
	                            		<f:facet name="header">Max Members</f:facet>
	                            		#{p.maxMembers}
	                            	</h:column>
	                            	<h:column>
	                            		<f:facet name="header">State</f:facet>
	                            		#{p.state}
	                            	</h:column>
	                            	<h:column>
	                            		<f:facet name="header">Deadline</f:facet>
	                            		#{p.deadline.toString().substring(0,16)}
	                            	</h:column>
	                            	<h:column>
	                            		<f:facet name="header">Subscrition Deadline</f:facet>
	                            		#{p.subscriptionDeadline.toString().substring(0,16)}
	                            	</h:column>
	                            	<h:column>
	                            		<f:facet name="header">Views</f:facet>
	                            		#{p.views}
	                            	</h:column>
	                            	<h:column>
	                            		<f:facet name="header">Edit</f:facet>
	                            		<i class="fa fa-remove"/>
	                           		    <h:link class="link" outcome="adminProject">
				                        	<f:param name="projectId" value="#{p.id}" />
				                        	<i class="fa fa-eye"/>
				                        </h:link>
	                            	</h:column>
	                            </h:dataTable>
                        </div>
                    </div>
                </div>
	</ui:define>
	
	
	<ui:define name="scripts">
		<script>
			$('.table').DataTable();
		</script>
		
		<!-- charts -->
		<!-- lineChart -->
		<script>
			var ctxL = document.getElementById("lineChartViews").getContext('2d');
		    var gradientFill = ctxL.createLinearGradient(0, 0, 0, 290);
		    gradientFill.addColorStop(0, "rgba(78,115,223, 1)");
		    gradientFill.addColorStop(1, "rgba(78,115,223, 0.1)");
		    var myLineChart = new Chart(ctxL, {
		      type: 'line',
		      data: {
		        labels: ["January", "February", "March", "April", "May", "June", "July"],
		        datasets: [
		          {
		            label: "Projects views",
		            data: [0, 65, 45, 65, 35, 65, 0],
		            backgroundColor: gradientFill,
		            borderColor: [ 'rgb(78,115,223)', ],
		            borderWidth: 2,
		            pointBorderColor: "#fff",
		            pointBackgroundColor: "rgba(78,115,223, 0.1)",
		          }
		        ]
		      },
		      options: {
		        responsive: true
		      }
		    });
	    </script>
	    
		<!-- Bar chart -->
	    <script>
			var ctxL = document.getElementById("barChartCreatedProjects").getContext('2d');
		    var gradientFill = ctxL.createLinearGradient(0, 0, 0, 290);
		    gradientFill.addColorStop(0, "rgba(78,115,223, 1)");
		    gradientFill.addColorStop(1, "rgba(78,115,223, 0.3)");
		    var myLineChart = new Chart(ctxL, {
		      type: 'bar',
		      data: {
		        labels: ["January", "February", "March", "April", "May", "June", "July"],
		        datasets: [
		          {
		            label: "Projects created",
		            data: [0, 65, 45, 65, 35, 65, 0],
		            backgroundColor: gradientFill,
		            borderColor: [ 'rgb(78,115,223)', ],
		            borderWidth: 2,
		            pointBorderColor: "#fff",
		            pointBackgroundColor: "rgba(78,115,223, 0.1)",
		          }
		        ]
		      },
		      options: {
		        responsive: true
		      }
		    });
	    </script>
	</ui:define>
</ui:composition>